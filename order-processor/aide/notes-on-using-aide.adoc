[#notes-on-using-aide]
= Notes on using AIDE
:doctype: revision-notes
:author: Peter Lawrey
:lang: en-GB
:toc:

Keeping notes on how the project is progressing and what changes you have made is helpful.
This can help you understand the project better and make the necessary changes at the end to complete it.

NOTE: This document can be a template for recording notes on your own project and for helping the AI suggest improvements, as it is also a source of information between phases.

== First Phase - Requirements

Create a skeleton for the project and see what the AI can generate for you.
These are more a source of inspiration than a source of truth.

NOTE: Using `o1` is usally better than `4o` as it is more likely to be understood by the AI and produce a better result. `4o` works better for converting images, or web pages to asciidoc.

- `Generate a functional requirements asciidoc of OMSImpl detailed enough to recreate this implementation including a prompt to execute it.` (Paste the `context.asciidoc`)
- `suggest improvements to this requirements document`

.Request to clarify assumptions to the requirements document.
----
Add to the requirements document to note that this component is intended to be in an event driven framework. Each input event comes from a Chronicle Queue, and each output is written to a Chronicle Queue, providing traceability. Validation is performed by the framework calling validate() on the input DTO before calling the matching method, and validate() called on the output DTO before writing to the queue.
Also note;
- On receiving a NewOrderSingle, the system must create an ExecutionReport. If the request is invalid, the system must create and send an OrderCancelReject.
- When an exception is thrown, the framework captures the exception and calls jvmError.
- for a simple example such as this, the component should be able to consistently handle 100k msg/s with low jitter on the 99% latency or better.
----

The improved generated requirements document was written to `src/main/adoc/oms-requirements.adoc`

- `generate a functional requirements document for the packages lost.town.oms.api and lost.town.oms.dto as an asciidoc with enough detail to recreate them`
- `suggest improvements to these requirements`

.Request to clarify details
----
add to the api requirements document that the frame work is responsible for calling validate() before passing the event to the component, and for an output DTO before an output is written.
There is an assumption of single threadedness
The YAML tests describe sample usage. see BDD tests, Given `_setup.yaml` events, When `in.yaml` events are tested and Then we expect `out.yaml` events
The `jvmError` is called for every Exception thrown.
This demo relies on Chronicle Wire however a production example would require Chronicle Services to support failover to a replicated system and restartability.
More YAML based tests can be added by including a new directory in the list of paths in the OMSImplTest class.
----

- `make the requirements document detailed enough to recreate the API and dto packages`

Output written as `src/main/adoc/oms-api-requirements.adoc`

== Second Phase - Unit Tests

Reran `AppDocumentApp` to create a new context.asciidoc file.

- `suggest improvements to the YAML based tests`
* Consistent case for `sell`, `ordType`, and `clOrdID` in the YAML files.
* Consistent absense of timezone ie removed `Z` from timestamps.
* `Following suggestion 2.1, add a Scenario headings to all the YAML based in.yaml files`
** (Reran `AppDocumentApp` to create a new increment.asciidoc file so it has the changes I just made)
** Merged using `Compare with Clipboard`
- `generate a unit test for OMSImpl that covers edge cases`
* Minor fixes to the tests to ensure they compile.
- Run tests with `-Dregress.tests` to update the out.yaml files.
* This created three new agitated tests after correcting the case of `clOrdID` in the YAML files.
- `Generate a details requirements asciidoc for unit tests and yaml based event driven tests including assumptions made by the framework`
- `improve and reduce duplication in src/main/adoc files`
* Ten reasonable suggestions to improve the requirements and test documents, but none compelling.

== Third Phase - Code Improvements

Review the project

- `Suggest improvements to the classes in town.lost.oms.api`
*
- `based on the FIX 4.2 specification, extract a description of messages in town.lost.oms.dto and their fields in asciidoc`

== Fourth Phase

Restructure the project to make it easier to work with

- Refactor the requirements, code, and/or tests to make them easier for the AI to work with and understand.

== Fifth Phase

Finalize the project

- Review the changes made in the previous phases to ensure they are consistent and correct.
- Make any necessary corrections or adjustments once you feel you aren't advancing.

NOTE: You must understand the project to make the necessary changes at the end to make it complete.
If you don't understand something, ask for clarification or skip it and possibly return to it later.
